# Spatio-temporal Gap Filling with Machine Learning - STML

## General Information

This repository contains spatio-temporal gap filling software as well as some generated results.
Our probabilistic gap filling approach is currently under review for scientific publication, this repository allows reviewers and readers to reproduce and better understand the results.

The software is designed to fill gaps in a spatio-temporal data context.
More specifically, it deploys probabilistic machine learning (ML) methods on the incomplete dataset to reconstruct missing values.
Keep in mind that this software serves as an exemplary implementation of theoretical methods and is intended for scientific usage.

## Software Requirements

The software is implemented and tested with Python 3.5.
It comes with a Dockerfile and thus can be run inside a Docker container.
For this, simply build the Docker image and start up the container, it will have all dependencies installed.

For usage without containers, Python needs to be installed.
Next install this package by running `pip install .` in the root directoriy of the repository.
There are some mandatory package requirements, which will be installed on the fly:

* numpy
* scipy
* scikit-learn

To make use of the whole functionality, you might also want to consider installing the optional packages:

* Pillow (for generating images)
* pxpy (for probabilistic gap filling)
* networkx & matplotlib (for generating figures of MRF structures)
* Tkinter (for viewing results with the *gap_filling_viewer*)

In order to generate plots, a valid LaTeX distribution with pgfplots and `pdflatex` support needs to be installed as well.

## How To Use

For standalone gap filling, simply run `python -m stml`. Pass `-h` for a detailed overview of command line parameters.

Usage from software is exemplary shown in `scripts/example.py`, and can be extended to any needs.

Run the `stml/cleanup.sh` script for cleaning the current directory of files generated by stml.

`scripts/gap_filling_viewer.py` allows to interactively inspect gap filling results, it is simply started via command line.
It uses the Pillow and Tkinter packages and can be controlled via mouse and keyboard.
Pass `-h` for a detailed overview of command line parameters.

## Data for Gap Filling

The implemented gap filling methods have been tested on synthetic data as well as real-world remote sensing datasets.
By passing `-d MinimalChess` to the software, experiments can be run with the synthetic data.

The `Dortmund From Space 2018` data (aka `GER`) has been donated to *UC Irvine Machine Learning Repository* but has not been published yet.
It is based on Landsat 8 OLI/TIRS C1 Level-2 data, which is on-demand distributed by U.S. Geological Survey's Earth Resources Observation and Science (EROS) Center.
More information can be found in the README that comes with the data. For using this data, download the folder, unpack it, and start the software with `-d /[download path]/dortmund_from_space_2018/`.

## Outline of Gap Filling Method

1. Load and reshape spatio-temporal data and gap masks

2. Set up a cross-validation (CV) and add artificial gaps in each split

3. For each CV split:

    a. Learn the model on the training data

    b. Predict the missing entries in the test data

    c. Evaluate results on artificial gaps

4. Merge reports and visualize results

## Attached Results

[coming soon]

## Reference

If you use this code or the data, please link back to <https://github.com/tmplxz/stml>.

## Term of Use

Please refer to `LICENSE.md` for terms of use.

Copyright (c) 2020 <https://github.com/tmplxz>
